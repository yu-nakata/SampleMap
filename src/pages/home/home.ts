import { Component } from '@angular/core';
import { NavController } from 'ionic-angular';
import { GoogleMaps, GoogleMap, GoogleMapsEvent, ILatLng, Polyline } from '@ionic-native/google-maps';

@Component({
  selector: 'page-home',
  templateUrl: 'home.html'
})
export class HomePage {

  map: GoogleMap;  // クラス内でmapプロパティを作っておくと便利
  latLngArray: ILatLng[] = [];

  constructor() { }

  ionViewDidLoad() {
    this.createArray();
    this.loadMap();
  }

  loadMap() {

    // 表示したい位置にある<div>のidを指定します
    let mapElement = document.getElementById('map');
    this.map = GoogleMaps.create(mapElement,{ camera: { zoom: 16 } });

    // MAP_READYイベントが来るまで待ちます
    this.map.one(GoogleMapsEvent.MAP_READY).then(() => {
      console.log('地図が準備完了！');
      this.map.moveCamera({
        target: { 'lat': 35.862331, 'lng': 139.971179 },
        tilt: 0,
        bearing: 0,
        zoom: 16,
      });
    });
  }

  createMarker() {
    this.latLngArray.forEach((latLng) => {
      this.map.addMarker({ 'position': { 'lat': latLng.lat, 'lng': latLng.lng } });
    });
  }

  createPolyline() {
    for (var i = 0; i < 50; i++) {
      this.map.addPolyline({ 'points': this.latLngArray, 'color': "#0000ff44", "width": 5});
    }
  }

  onButtonClick(sender) {
    this.map.setDiv("map_canvas");
    this.createMarker();
    this.createPolyline();
  }

  createArray() {
    this.latLngArray.push(
      {'lat': 35.862331, 'lng':139.971179 },
      {'lat': 35.8622177, 'lng':139.9702634 },
      {'lat': 35.862442, 'lng':139.970081 },
      {'lat': 35.862955, 'lng':139.969427 },
      {'lat': 35.863120, 'lng':139.970275 },
      {'lat': 35.862424, 'lng':139.970865 },
      {'lat': 35.861981, 'lng':139.971401 },
      {'lat': 35.861851, 'lng':139.971358 },
      {'lat': 35.861686, 'lng':139.971723 },
      {'lat': 35.862056801464284, 'lng':139.97054636478424 },
      {'lat': 35.86223939558678, 'lng':139.97072875499725 },
      {'lat': 35.86263066728996, 'lng':139.97102916240692 },
      {'lat': 35.86264370964681, 'lng':139.97131884098053 },
      {'lat': 35.86251763344078, 'lng':139.97159779071808 },
      {'lat': 35.862465463917545, 'lng':139.862465463917545 },
      {'lat': 35.862339387427994, 'lng':139.97209131717682 },
      {'lat': 35.86208723384725, 'lng':139.9721074104309 },
      {'lat': 35.861956809266545, 'lng':139.97193038463593 },
      {'lat': 35.86182638447128, 'lng':139.97177481651306 },
      {'lat': 35.861643789397306, 'lng':139.9718874692917 },
      {'lat': 35.861774214493074, 'lng':139.97158706188202 },
      {'lat': 35.86202202158372, 'lng':139.97144222259521 },
      {'lat': 35.86211331873763, 'lng':139.97159242630005 },
      {'lat': 35.8617568244927, 'lng':139.97128665447235 },
      {'lat': 35.86170465446872, 'lng':139.97114181518555 },
      {'lat': 35.8615829242792, 'lng':139.97164070606232 },
      {'lat': 35.861800299486454, 'lng':139.97145295143127 },
      {'lat': 35.86180464698453, 'lng':139.97178554534912 },
      {'lat': 35.8615829242792, 'lng':139.97187674045563 },
      {'lat': 35.86147423645199, 'lng':139.97175872325897 },
      {'lat': 35.861426413760825, 'lng':139.97156023979187 },
      {'lat': 35.86133511581572, 'lng':139.97149050235748 },
      {'lat': 35.86131337819425, 'lng':139.97168898582458 },
      {'lat': 35.86127425046057, 'lng':139.97186601161957 },
      {'lat': 35.86138728608295, 'lng':139.97203767299652 },
      {'lat': 35.86164813690396, 'lng':139.97204840183258 },
      {'lat': 35.86189594438879, 'lng':139.9719786643982 },
      {'lat': 35.86148293148365, 'lng':139.97226297855377 },
      {'lat': 35.86132642076785, 'lng':139.9721610546112 },
      {'lat': 35.86120468999746, 'lng':139.9719786643982 },
      {'lat': 35.86113947700782, 'lng':139.97188210487366 },
      {'lat': 35.86123512270759, 'lng':139.97226297855377 },
      {'lat': 35.86140467616438, 'lng':139.97240781784058 },
      {'lat': 35.862404599430384, 'lng':139.9698382616043 },
      {'lat': 35.86248720122308, 'lng':139.96994823217392 },
      {'lat': 35.86259154020657, 'lng':139.97005015611649 },
      {'lat': 35.86267196807928, 'lng':139.9701252579689 },
      {'lat': 35.86274370097799, 'lng':139.97026205062866 },
      {'lat': 35.86281543381175, 'lng':139.97017353773117 },
      {'lat': 35.86281108636911, 'lng':139.96999382972717 },
      {'lat': 35.86286325566485, 'lng':139.96986508369446 },
      {'lat': 35.862908903770446, 'lng':139.9695110321045 },
      {'lat': 35.863067585075854, 'lng':139.96916502714157 },
      {'lat': 35.86290673005175, 'lng':139.96915966272354 },
      {'lat': 35.862739353531424, 'lng':139.9692052602768 },
      {'lat': 35.86263718846868, 'lng':139.96925085783005 },
      {'lat': 35.86247633257106, 'lng':139.96919721364975 },
      {'lat': 35.862356777300555, 'lng':139.96905237436295 },
      {'lat': 35.86234590863065, 'lng':139.9692776799202 },
      {'lat': 35.86246981137914, 'lng':139.96939569711685 },
      {'lat': 35.862650230824435, 'lng':139.96947079896927 },
      {'lat': 35.86262197238423, 'lng':139.96959686279297 },
      {'lat': 35.86270457395037, 'lng':139.96975511312485 },
      {'lat': 35.86261979865765, 'lng':139.96982485055923 },
      {'lat': 35.86232199755164, 'lng':139.96944397687912 },
      {'lat': 35.86226982789963, 'lng':139.9698382616043 },
      {'lat': 35.862174183448445, 'lng':139.96970146894455 },
      {'lat': 35.86218939961887, 'lng':139.9694922566414 },
      {'lat': 35.86219592083385, 'lng':139.96927231550217 },
      {'lat': 35.86256980292967, 'lng':139.96897995471954 },
      {'lat': 35.86276109076182, 'lng':139.96894776821136 },
      {'lat': 35.863037153069314, 'lng':139.9694037437439 },
      {'lat': 35.86067428945882, 'lng':139.9714744091034 },
      {'lat': 35.86060907603284, 'lng':139.97167825698853 },
      {'lat': 35.86054821012018, 'lng':139.97191965579987 },
      {'lat': 35.8600830191012, 'lng':139.9718552827835 },
      {'lat': 35.860104757060064, 'lng':139.97150123119354 },
      {'lat': 35.860104757060064, 'lng':139.97150123119354 },
      {'lat': 35.860143885371045, 'lng':139.97110962867737 },
      {'lat': 35.86022648951969, 'lng':139.9702137708664 },
      {'lat': 35.859948243623016, 'lng':139.97028350830078 },
      {'lat': 35.859869986788595, 'lng':139.97066974639893 },
      {'lat': 35.8597786870508, 'lng':139.97117936611176 },
      {'lat': 35.85960043487867, 'lng':139.97117400169373 },
      {'lat': 35.859752601392096, 'lng':139.9716353416443 },
      {'lat': 35.859696082435505, 'lng':139.9722146987915 },
      {'lat': 35.859869986788595, 'lng':139.97260093688965 },
      {'lat': 35.86064385653338, 'lng':139.97220396995544 });
  }
}
